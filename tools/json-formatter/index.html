<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>JSON整形ツール（Pretty / Minify） | ToolBox</title>
  <meta name="description" content="JSONを整形（Pretty）/圧縮（Minify）できます。ブラウザ内で処理し、サーバーに送信しません。" />
  <link rel="canonical" href="https://mat4645.github.io/tools/json-formatter/" />
  <style>
    body{font-family:system-ui,-apple-system,"Segoe UI",sans-serif;margin:0;background:#f7f8fb;color:#111827}
    header,main{max-width:980px;margin:0 auto;padding:14px 16px}
    header{background:#fff;border-bottom:1px solid #e5e7eb;position:sticky;top:0}
    a{color:#2563eb;text-decoration:none} a:hover{text-decoration:underline}
    .card{background:#fff;border:1px solid #e5e7eb;border-radius:14px;box-shadow:0 10px 25px rgba(0,0,0,.06);padding:14px}
    textarea{width:100%;min-height:240px;border:1px solid #e5e7eb;border-radius:12px;padding:12px;font-family:ui-monospace,Consolas,monospace;font-size:13px;line-height:1.6}
    .row{display:flex;gap:10px;flex-wrap:wrap;align-items:center;margin:10px 0}
    button{border:1px solid #e5e7eb;background:#fff;padding:10px 12px;border-radius:12px;font-weight:600;cursor:pointer}
    button.primary{background:#2563eb;color:#fff;border-color:#2563eb}
    .msg{color:#6b7280;font-size:13px}
  </style>
</head>
<body>
<header>
  <div style="display:flex;justify-content:space-between;gap:10px;align-items:center">
    <div><strong>ToolBox</strong> / JSON整形</div>
    <nav style="display:flex;gap:12px;flex-wrap:wrap">
      <a href="/">ホーム</a>
      <a href="/tools/">ツール一覧</a>
      <a href="/about/">このサイトについて</a>
      <a href="/privacy/">プライバシーポリシー</a>
    </nav>
  </div>
</header>

<main>
  <h1 style="margin:14px 0 10px">JSON整形ツール（Pretty / Minify）</h1>
  <p class="msg">ブラウザ内で処理します（サーバーに送信しません）。</p>

  <div class="card">
    <div class="row">
      <button class="primary" id="btnPretty">Pretty（整形）</button>
      <button id="btnMinify">Minify（圧縮）</button>
      <button id="btnCopy" disabled>コピー</button>
      <button id="btnClear">クリア</button>
      <span class="msg" id="msg"></span>
    </div>

    <textarea id="input" placeholder='{"name":"Alice","age":30,"tags":["a","b"]}'></textarea>
    <div class="row" style="justify-content:space-between">
      <span class="msg">※ JSONとして正しくない場合はエラーを表示します。</span>
      <a href="/tools/">← ツール一覧へ</a>
    </div>
  </div>

  <div class="card" style="margin-top:14px">
    <h2 style="margin:0 0 8px;font-size:16px">FAQ</h2>
    <p class="msg" style="margin:0">入力したJSONは保存されません。自己責任でご利用ください。</p>
  </div>
</main>

<script>
  const $ = (id)=>document.getElementById(id);
  const input = $("input");
  const msg = $("msg");
  const btnCopy = $("btnCopy");
  let last = "";

  function setMsg(t){ msg.textContent = t||""; }

  function parse(){
    const t = input.value.trim();
    if(!t){ last=""; btnCopy.disabled=true; return null; }
    return JSON.parse(t);
  }

  $("btnPretty").addEventListener("click", ()=>{
    try{
      const obj = parse(); if(!obj){ setMsg("入力が空です"); return; }
      last = JSON.stringify(obj, null, 2);
      input.value = last;
      btnCopy.disabled = false;
      setMsg("整形しました");
    }catch(e){ setMsg("エラー：JSON形式が正しくありません"); }
  });

  $("btnMinify").addEventListener("click", ()=>{
    try{
      const obj = parse(); if(!obj){ setMsg("入力が空です"); return; }
      last = JSON.stringify(obj);
      input.value = last;
      btnCopy.disabled = false;
      setMsg("圧縮しました");
    }catch(e){ setMsg("エラー：JSON形式が正しくありません"); }
  });

  $("btnCopy").addEventListener("click", async ()=>{
    if(!last){ return; }
    try{
      await navigator.clipboard.writeText(last);
      setMsg("コピーしました");
    }catch(e){
      input.focus(); input.select();
      document.execCommand("copy");
      setMsg("コピーしました");
    }
  });

  $("btnClear").addEventListener("click", ()=>{
    input.value=""; last=""; btnCopy.disabled=true; setMsg("");
  });
</script>
</body>
</html>
