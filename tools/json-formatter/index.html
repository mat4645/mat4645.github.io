<!doctype html>
<html lang="ja">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="robots" content="index,follow" />

  <title>JSON整形ツール（Pretty/Minify・エラー表示・無料・ブラウザ完結） | ConvertFileBox</title>
  <meta name="description" content="JSONを整形（Pretty）/圧縮（Minify）できます。エラー表示・コピー対応。無料・ブラウザ完結でインストール不要。入力データはサーバーに送信しません。" />
  <link rel="canonical" href="https://www.convertfilebox.net/tools/json-formatter/" />

  <!-- Styles -->
  <link rel="stylesheet" href="/assets/css/style.css">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;800&display=swap" rel="stylesheet">

  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2739559953649909"
    crossorigin="anonymous"></script>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-2M7JXDP7J8"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'G-2M7JXDP7J8');
  </script>

  <style>
    .split-pane {
      display: grid;
      grid-template-columns: 1fr;
      gap: 1.5rem;
    }

    @media (min-width: 960px) {
      .split-pane {
        grid-template-columns: 1fr 1fr;
      }
    }
  </style>
</head>

<body>

  <header class="site-header">
    <div class="container flex items-center justify-between" style="height: 100%;">
      <a href="/" class="brand">
        <div class="brand-logo" aria-hidden="true">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z" />
            <polyline points="14 2 14 8 20 8" />
            <path d="M8 13h8" />
            <path d="M8 17h8" />
            <path d="M10 9h4" />
          </svg>
        </div>
        <div>
          ConvertFileBox
          <span class="text-xs text-muted" style="display:block; font-weight:400; line-height:1;">無料ツール集</span>
        </div>
      </a>

      <button id="mobile-menu-btn" class="mobile-menu-btn" aria-label="メニューを開く">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="3" y1="12" x2="21" y2="12"></line>
          <line x1="3" y1="6" x2="21" y2="6"></line>
          <line x1="3" y1="18" x2="21" y2="18"></line>
        </svg>
      </button>

      <nav id="nav-links" class="nav-links">
        <a href="/" class="nav-link">ホーム</a>
        <a href="/tools/" class="nav-link active">ツール一覧</a>
        <a href="/about/" class="nav-link">このサイトについて</a>
      </nav>
    </div>
  </header>

  <main class="container mt-8 mb-8" style="max-width: 1280px;">
    <div class="text-center mb-8">
      <h1>JSON 整形ツール</h1>
      <p class="text-muted mt-2">JSONを読みやすく整形 (Pretty) したり、1行に圧縮 (Minify) できます。</p>
      <div class="flex justify-center gap-4 mt-4">
        <span class="tag">サーバー送信なし</span>
        <button id="btnSample" class="text-sm text-primary"
          style="background:none; border:none; text-decoration:underline; cursor:pointer;">サンプルを入力</button>
      </div>
    </div>

    <!-- Security Block -->
    <div class="panel mb-8">
      <h2 class="text-lg font-bold mb-4">🔒 セキュリティについて</h2>
      <p class="mb-4 font-bold">入力データはサーバーに送信されません。処理はすべてブラウザ内で完結します。</p>
      <ul class="list-disc list-inside text-sm text-muted mb-6 pl-4">
        <li>ファイルはアップロードされません（外部サーバーへ送信しません）</li>
        <li>入力内容はサーバー側で保存・解析しません</li>
        <li>会社・業務用のCSV/JSONでも安心してご利用いただけます</li>
      </ul>
      <div class="flex flex-wrap gap-2">
        <span class="tag">サーバー送信なし</span>
        <span class="tag">ブラウザ内で完結</span>
        <span class="tag">ログ保存なし</span>
        <span class="tag">インストール不要</span>
      </div>
    </div>

    <div class="split-pane">
      <!-- Input Column -->
      <div class="flex flex-col gap-2">
        <div class="toolbar">
          <h2 class="text-lg font-bold">入力</h2>
          <button id="btnClear" class="btn btn-danger-ghost btn-sm">クリア</button>
        </div>
        <textarea id="ta" class="code-editor" style="height: 500px;" placeholder='ここにJSONを貼り付けてください...
例:
{"name":"Alice","age":30,"tags":["a","b"]}'></textarea>
        <div id="errorMsg" class="alert alert-warning mt-2" style="display:none"></div>
      </div>

      <!-- Output Column -->
      <div class="flex flex-col gap-2">
        <div class="toolbar">
          <div class="flex items-center gap-4">
            <h2 class="text-lg font-bold">結果</h2>
            <div class="flex border border-border rounded-md overflow-hidden">
              <button id="btnPretty" class="px-3 py-1 bg-primary text-white text-sm font-medium">Pretty</button>
              <button id="btnMinify"
                class="px-3 py-1 bg-surface text-main text-sm font-medium border-l border-border hover:bg-surface-alt">Minify</button>
            </div>
          </div>
          <div class="flex gap-2">
            <button class="btn btn-secondary btn-sm" id="btnCopy" disabled>コピー</button>
          </div>
        </div>
        <textarea id="output" class="code-editor" readonly style="height: 500px;"
          placeholder="整形結果がここに表示されます"></textarea>
      </div>
    </div>

  </main>

  <footer class="site-footer">
    <div class="container text-center">
      <div class="flex justify-center gap-4 mb-4 text-sm text-muted">
        <a href="/tools/">ツール一覧</a>
        <a href="/about/">このサイトについて</a>
        <a href="/privacy/">プライバシーポリシー</a>
      </div>
      <div class="text-xs text-muted">
        &copy; <span id="year">2026</span> ConvertFileBox. <br>
        変換結果の正確性は保証しません（自己責任でご利用ください）。
      </div>
    </div>
  </footer>

  <script src="/assets/js/ui.js"></script>
  <script>
    const $ = (id) => document.getElementById(id);
    const ta = $("ta");
    const output = $("output");
    const errorMsgEl = $("errorMsg");

    const btnPretty = $("btnPretty");
    const btnMinify = $("btnMinify");
    const btnCopy = $("btnCopy");
    const btnClear = $("btnClear");
    const btnSample = $("btnSample");

    let mode = "pretty"; // pretty or minify

    function setError(text) {
      if (!text) {
        errorMsgEl.style.display = "none";
        return;
      }
      errorMsgEl.textContent = text;
      errorMsgEl.style.display = "block";
    }

    function getObj() {
      const t = (ta.value ?? "").trim();
      if (!t) return null;
      return JSON.parse(t);
    }

    function process() {
      setError("");
      const t = (ta.value ?? "").trim();
      if (!t) {
        output.value = "";
        btnCopy.disabled = true;
        return;
      }

      try {
        const obj = JSON.parse(t);
        let result = "";
        if (mode === "pretty") {
          result = JSON.stringify(obj, null, 2);
        } else {
          result = JSON.stringify(obj);
        }
        output.value = result;
        btnCopy.disabled = false;
      } catch (e) {
        // 入力中はエラーを表示しない（自動更新の場合）
        // あるいは、ボタン式でなくなったので、常時更新するが、エラーの時は古い結果を残すか、エラーを出すか。
        // 入力側でリアルタイムエラーチェックを行う。
        output.value = ""; // エラーなので結果なし
        btnCopy.disabled = true;
        setError("JSON形式エラー: カンマ、括弧、ダブルクォートを確認してください。");
      }
    }

    // Debounce for input
    let debounceTimer = null;
    ta.addEventListener("input", () => {
      if (debounceTimer) clearTimeout(debounceTimer);
      debounceTimer = setTimeout(process, 300);
    });

    btnPretty.addEventListener("click", () => {
      mode = "pretty";
      btnPretty.className = "px-3 py-1 bg-primary text-white text-sm font-medium";
      btnMinify.className = "px-3 py-1 bg-surface text-main text-sm font-medium border-l border-border hover:bg-surface-alt";
      process();
    });

    btnMinify.addEventListener("click", () => {
      mode = "minify";
      btnMinify.className = "px-3 py-1 bg-primary text-white text-sm font-medium";
      btnPretty.className = "px-3 py-1 bg-surface text-main text-sm font-medium border-r border-border hover:bg-surface-alt";
      process();
    });

    btnCopy.addEventListener("click", async () => {
      if (!output.value) return;
      copyToClipboard(output.value, btnCopy);
    });

    btnClear.addEventListener("click", () => {
      ta.value = "";
      output.value = "";
      setError("");
      btnCopy.disabled = true;
    });

    btnSample.addEventListener("click", () => {
      ta.value = '{"name":"Alice","age":30,"tags":["a","b"],"meta":{"city":"Tokyo"}}';
      mode = "pretty";
      process();
    });

  </script>
</body>

</html>